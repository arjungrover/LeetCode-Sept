class Solution {
    public int numSubarrayProductLessThanK(int[] nums, int k) {
        if(k<=1)
            return 0;
        
        int sp = -1;
        int ep = 0;
        int res = 0;
        int p = 1;
        
        while(ep!=nums.length){
            p*=nums[ep];
            
            while(p>=k){
                sp++;
                p/=nums[sp];
            }
            
            res+=(ep-sp);
            ep++;    
        }
        
        return res;
    }
}